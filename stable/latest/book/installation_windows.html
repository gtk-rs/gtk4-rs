<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Windows - GUI development with Rust and GTK 4</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/style.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">GUI development with Rust and GTK 4</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/gtk-rs/gtk4-rs/tree/main/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="windows"><a class="header" href="#windows">Windows</a></h1>
<p>When preparing your Windows machine, you have to decide between either using the <strong>MSVC toolchain</strong> or the <strong>GNU toolchain</strong>.
If in doubt, go for MSVC since that is the default on Windows.
You will want to go for the GNU toolchain if you depend on libraries that can only be compiled with the GNU toolchain.</p>
<h2 id="install-rustup"><a class="header" href="#install-rustup">Install Rustup</a></h2>
<p>Install the Rust toolchain via <a href="https://rustup.rs/">rustup</a>.</p>
<h2 id="install-gtk-4"><a class="header" href="#install-gtk-4">Install GTK 4</a></h2>
<details>
<summary>Build GTK 4 with gvsbuild and MSVC (recommended)</summary>
<h3 id="set-rust-toolchain-to-msvc"><a class="header" href="#set-rust-toolchain-to-msvc">Set Rust toolchain to MSVC</a></h3>
<p>Tell Rust to use MSVC by executing:</p>
<pre><code>rustup default stable-msvc
</code></pre>
<p>Note that this does not install the MSVC toolchain. If you don't have it yet, you will need to <a href="https://learn.microsoft.com/en-us/windows/dev-environment/rust/setup">install it separately</a>.</p>
<h3 id="build-gtk-4"><a class="header" href="#build-gtk-4">Build GTK 4</a></h3>
<p>Follow the <a href="https://github.com/wingtk/gvsbuild#development-environment"><code>gvsbuild</code> docs to build GTK 4</a>. Be sure to build the right version:</p>
<pre><code>gvsbuild build gtk4
</code></pre>
<h3 id="update-environment-variables"><a class="header" href="#update-environment-variables">Update environment variables</a></h3>
<ol>
<li>Go to Start</li>
<li>Search for 'Advanced system settings'</li>
<li>Click 'Environment Variables...'</li>
<li>Ensure there is a user variable named <code>PKG_CONFIG_PATH</code> with value <code>C:\gtk-build\gtk\x64\release\lib\pkgconfig</code></li>
<li>Edit the variable named <code>Path</code> and add <code>C:\gtk-build\gtk\x64\release\bin</code> to it</li>
<li>Ensure there is a user variable named <code>Lib</code> with value <code>C:\gtk-build\gtk\x64\release\lib</code> (or add new value to existing variable if already exists)</li>
</ol>
<p>You can now continue with the <a href="./project_setup.html">project setup</a>.</p>
</details>
<details>
<summary>Build GTK 4 manually with MSVC</summary>
<p>If it's not possible to build with <code>gvsbuild</code> (or you want to customize your build), you
can build GTK 4 and the minimum dependencies you need manually.</p>
<h3 id="set-rust-toolchain-to-msvc-1"><a class="header" href="#set-rust-toolchain-to-msvc-1">Set Rust toolchain to MSVC</a></h3>
<p>Set the Rust toolchain to MSVC by executing:</p>
<pre><code>rustup default stable-msvc
</code></pre>
<h3 id="visual-studio"><a class="header" href="#visual-studio">Visual Studio</a></h3>
<p>Install Visual Studio Community from <a href="https://visualstudio.microsoft.com/de/vs/community/">visualstudio.microsoft.com</a>.
Make sure to check the box "Desktop development with C++" during the installation process.</p>
<div style="text-align:center"><img src="img/vs-install.png" /></div>
<h3 id="git"><a class="header" href="#git">Git</a></h3>
<p>Download git from <a href="https://gitforwindows.org/">gitforwindows.org</a>.</p>
<h3 id="cmake"><a class="header" href="#cmake">CMake</a></h3>
<p>Download CMake from <a href="https://cmake.org/download/">https://cmake.org/download/</a></p>
<h3 id="python"><a class="header" href="#python">Python</a></h3>
<p>Download python from <a href="https://www.python.org/downloads">python.org</a>.
Make sure to opt-in to adding Python to your Path during the installation process.</p>
<h3 id="meson"><a class="header" href="#meson">Meson</a></h3>
<p>Install meson by executing:</p>
<pre><code class="language-powershell">pip install meson ninja
</code></pre>
<h3 id="gettext-021"><a class="header" href="#gettext-021">Gettext 0.21</a></h3>
<p>Download Gettext 0.21 from <a href="https://mlocati.github.io/articles/gettext-iconv-windows.html">mlocati.github.io</a>.
Make sure to select the static version.</p>
<h3 id="pkg-config"><a class="header" href="#pkg-config">Pkg-config</a></h3>
<p>Download pkg-config-lite from <a href="https://sourceforge.net/projects/pkgconfiglite/">sourceforge.net</a>.
Then extract and unpack it in <code>C:/</code>, so that the executable is in <code>C:\pkg-config-lite-0.28-1\bin</code>.</p>
<h3 id="update-environment-variables-1"><a class="header" href="#update-environment-variables-1">Update environment variables</a></h3>
<ol>
<li>Go to settings -&gt; Search and open <code>Advanced system settings</code> -&gt; Click on <code>Environment variables</code></li>
<li>Select <code>Path</code> -&gt; Click on <code>Edit</code> -&gt; Add the following entries:</li>
</ol>
<pre><code>C:\pkg-config-lite-0.28-1\bin
C:\gnome\bin
</code></pre>
<ol start="3">
<li>Go back to <code>Environment variables</code></li>
<li>Under <code>User variables</code> click on <code>New</code> and add:</li>
</ol>
<ul>
<li>Variable name: <code>PKG_CONFIG_PATH</code></li>
<li>Variable value: <code>C:\gnome\lib\pkgconfig</code></li>
</ul>
<h3 id="compile-and-install-gtk-4"><a class="header" href="#compile-and-install-gtk-4">Compile and install GTK 4</a></h3>
<p>From the Windows start menu, search for <code>x64 Native Tools Command Prompt for VS 2019</code>.
That will open a terminal configured to use MSVC x64 tools.
From there, run the following commands:</p>
<pre><code class="language-cmd">cd /
git clone https://gitlab.gnome.org/GNOME/gtk.git --depth 1
git clone https://gitlab.gnome.org/GNOME/libxml2.git --depth 1
git clone https://gitlab.gnome.org/GNOME/librsvg.git --depth 1

:: Make sure that cmd finds pkg-config-lite when searching for pkg-config
where pkg-config

:: Make sure that setuptools is available.
pip install setuptools

cd gtk
meson setup builddir --prefix=C:/gnome -Dbuild-tests=false -Dmedia-gstreamer=disabled
meson install -C builddir
cd /

cd libxml2
cmake -S . -B build -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=C:\gnome -D LIBXML2_WITH_ICONV=OFF -D LIBXML2_WITH_LZMA=OFF -D LIBXML2_WITH_PYTHON=OFF -D LIBXML2_WITH_ZLIB=OFF
cmake --build build --config Release
cmake --install build
cd /

cd librsvg/win32
nmake /f generate-msvc.mak generate-nmake-files
nmake /f Makefile.vc CFG=release install PREFIX=C:\gnome
cd /
</code></pre>
<p>You can now continue with the <a href="./project_setup.html">project setup</a>.</p>
</details>
<details>
<summary>Install GTK 4 with MSYS2 and the GNU toolchain</summary>
<h3 id="install-rustup-1"><a class="header" href="#install-rustup-1">Install Rustup</a></h3>
<p>Install the rust toolchain via <a href="https://rustup.rs/">rustup</a>.</p>
<h3 id="remove-residues-from-the-msvc-toolchain"><a class="header" href="#remove-residues-from-the-msvc-toolchain">Remove residues from the MSVC toolchain</a></h3>
<p>If you used the MSVC toolchain before, make sure to revert all changes you made to environment variables during the installation process.</p>
<h3 id="msys2"><a class="header" href="#msys2">MSYS2</a></h3>
<p>Install MSYS2 from <a href="https://www.msys2.org/">www.msys2.org</a></p>
<h3 id="install-gtk-4-1"><a class="header" href="#install-gtk-4-1">Install GTK 4</a></h3>
<p>From the Windows start menu, search for <code>MSYS2 MinGW 64-bit</code>.
That will open a terminal configured to use MinGW x64 tools.</p>
<p>There, execute the following commands to install <code>GTK 4</code>, <code>pkgconf</code> and <code>gcc</code>.</p>
<pre><code class="language-sh">pacman -S mingw-w64-x86_64-gtk4 mingw-w64-x86_64-gettext mingw-w64-x86_64-libxml2 mingw-w64-x86_64-librsvg mingw-w64-x86_64-pkgconf mingw-w64-x86_64-gcc
</code></pre>
<h3 id="update-path-environment-variable"><a class="header" href="#update-path-environment-variable">Update <code>Path</code> environment variable</a></h3>
<ol>
<li>Go to settings -&gt; Search and open <code>Advanced system settings</code> -&gt; Click on <code>Environment variables</code></li>
<li>Select <code>Path</code> -&gt; Click on <code>Edit</code> -&gt; Add the following three entries:</li>
</ol>
<pre><code>C:\msys64\mingw64\include
C:\msys64\mingw64\bin
C:\msys64\mingw64\lib
</code></pre>
<h3 id="setup-the-gnu-toolchain-for-rust"><a class="header" href="#setup-the-gnu-toolchain-for-rust">Setup the GNU toolchain for Rust</a></h3>
<p>The default toolchain on windows is <code>stable-msvc</code>.
To switch to <code>stable-gnu</code>, run the following commands from your terminal:</p>
<ol>
<li><code>rustup toolchain install stable-gnu</code></li>
<li><code>rustup default stable-gnu</code></li>
</ol>
<p>Please note that this command might change in the future.
If it does not work anymore, please open an <a href="https://github.com/gtk-rs/gtk4-rs/issues/new/choose">issue</a> on our repo.</p>
<p>You can now continue with the <a href="./project_setup.html">project setup</a>.</p>
</details>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="installation_macos.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="project_setup.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="installation_macos.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="project_setup.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
